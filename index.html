<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–í—Å–µ–ª–µ–Ω–Ω–∞—è –∑–≤—É–∫–∞</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #4B0082, #000);
            overflow: hidden;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            box-sizing: border-box;
        }
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: transparent;
            z-index: 1;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        .meteor {
            position: absolute;
            width: 0.3vmin;
            height: 2vmin;
            background: linear-gradient(to bottom, #FFD700, transparent);
            animation: meteorFall 1.5s linear infinite;
        }
        @keyframes meteorFall {
            0% { transform: translate(0, -100%) rotate(45deg); opacity: 1; }
            100% { transform: translate(20vmin, 100vh) rotate(45deg); opacity: 0; }
        }
        .card {
            animation: fadeIn 0.5s ease-in;
            position: relative;
            background: linear-gradient(135deg, #483D8B, #000);
            border: 0.3vmin solid #FFD700;
            padding: 1vmin;
            border-radius: 1vmin;
            box-shadow: 0 0 2vmin rgba(255, 215, 0, 0.5);
            max-width: 90%;
            width: 100%;
            text-align: center;
            margin-top: 1vmin;
            z-index: 2000;
            box-sizing: border-box;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(2vmin); }
            to { opacity: 1; transform: translateY(0); }
        }
        button:hover {
            transform: scale(1.05);
            transition: transform 0.2s;
        }
        button:disabled {
            background-color: #6b7280;
            cursor: not-allowed;
        }
        .progress-container {
            width: 90%;
            position: fixed;
            top: 1vmin;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 3000;
        }
        .progress-bar {
            width: 100%;
            height: 2.5vmin;
            background: transparent;
            border: 0.3vmin solid #FFD700;
            border-radius: 1vmin;
            position: relative;
            box-shadow: 0 0 2vmin #FFD700, inset 0 0 0.5vmin #FFD700;
            overflow: hidden;
        }
        .progress-section {
            position: absolute;
            height: 100%;
            background: #00CED1;
            box-shadow: 0 0 1vmin #00CED1;
            transition: width 0.5s ease-in-out;
        }
        .glow-effect {
            position: absolute;
            height: 100%;
            background: #ffffff;
            opacity: 0;
            animation: glow 0.5s ease-out forwards;
        }
        @keyframes glow {
            0% { opacity: 0.8; box-shadow: 0 0 1vmin #ffffff, 0 0 2vmin #ffffff; }
            100% { opacity: 0; box-shadow: none; }
        }
        .progress-label {
            color: #FFD700;
            font-size: 3vmin;
            text-shadow: 0 0 0.5vmin #FFD700;
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            margin-bottom: 0.5vmin;
        }
        .progress-mark {
            position: absolute;
            height: 100%;
            width: 0.3vmin;
            background: #fff;
            opacity: 0.8;
        }
        .character-on-rocket {
            position: absolute;
            width: 4vmin;
            height: 4vmin;
            transition: left 0.5s ease-in-out;
            bottom: -1vmin;
            z-index: 2000;
            animation: moveUpDown 0.8s infinite alternate;
        }
        @keyframes moveUpDown {
            0% { transform: translateY(0); }
            100% { transform: translateY(-0.5vmin); }
        }
        .character-on-rocket.cheer {
            animation: cheer 0.5s ease-in-out;
        }
        @keyframes cheer {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-1vmin) rotate(15deg); }
        }
        .character-on-rocket.surprise {
            animation: surprise 0.5s ease-in-out;
        }
        @keyframes surprise {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-0.5vmin) scale(1.1); }
        }
        .rocket-final {
            position: absolute;
            font-size: 3vmin;
            filter: drop-shadow(0 0 0.5vmin #FFD700);
            transition: left 2s ease-out, opacity 2s ease-out;
            z-index: 2000;
        }
        .rocket-final.flying {
            left: 100%;
            opacity: 0;
        }
        .celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .confetti {
            position: absolute;
            width: 1vmin;
            height: 1vmin;
            background: #FFD700;
            opacity: 0.9;
            border-radius: 50%;
            animation: fallConfetti 2s ease-out forwards;
        }
        @keyframes fallConfetti {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        .quiz-container {
            background-color: #ffffff;
            padding: 1vmin;
            border-radius: 1vmin;
            box-shadow: 0 0 2vmin rgba(255, 215, 0, 0.5);
            width: 90%;
            max-width: 90vw;
            text-align: center;
            position: relative;
            z-index: 2000;
            margin-top: 8vmin;
            box-sizing: border-box;
            overflow-x: auto;
        }
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 110vh;
            z-index: 3000;
            animation: fadeOut 1.5s ease-out forwards;
            animation-delay: 1.5s;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
        }
        .splash-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            max-height: 110vh;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .title-large {
            font-size: 5vmin;
            font-weight: bold;
            color: #FF4500;
            margin-bottom: 1.5vmin;
        }
        .title-medium {
            font-size: 4.5vmin;
            font-weight: bold;
            color: #FF4500;
            margin-bottom: 1.5vmin;
        }
        .text-medium {
            font-size: 4vmin;
            color: #E6E6FA;
            margin-bottom: 1.5vmin;
        }
        .text-large {
            font-size: 4.5vmin;
            color: #E6E6FA;
            margin-bottom: 1.5vmin;
        }
        .text-xlarge {
            font-size: 5vmin;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 1.5vmin;
        }
        .option-button {
            background-color: #483D8B;
            color: #ffffff;
            padding: 1.5vmin;
            border-radius: 1vmin;
            margin: 0.5vmin 0;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
            width: 100%;
            font-size: 4vmin;
            min-height: 8vmin;
            white-space: normal;
            word-wrap: break-word;
            overflow: hidden;
            text-overflow: ellipsis;
            box-sizing: border-box;
        }
        .option-button:hover {
            filter: brightness(1.1);
        }
        .option-button.correct {
            background-color: #00CED1;
            animation: correctPulse 0.5s ease-in-out;
        }
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40%, 1fr));
            gap: 1.5vmin;
            justify-content: center;
            width: 100%;
        }
        @media (max-width: 360px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .option-button {
                font-size: 3.5vmin;
                min-height: 10vmin;
            }
            .title-large, .text-xlarge {
                font-size: 4.5vmin;
            }
            .title-medium {
                font-size: 4vmin;
            }
            .text-medium, .text-large {
                font-size: 3.5vmin;
            }
        }
        .input-field {
            width: 100%;
            padding: 1.5vmin;
            border: 0.3vmin solid #FF4500;
            border-radius: 1vmin;
            margin-bottom: 1.5vmin;
            font-size: 4vmin;
            color: #ffffff;
            background-color: #1f2937;
            outline: none;
            box-sizing: border-box;
        }
        .input-field:focus {
            ring: 0.3vmin;
            ring-color: #FF4500;
        }
        .button-primary {
            background-color: #FF4500;
            color: #ffffff;
            padding: 1.5vmin;
            border-radius: 1vmin;
            width: 100%;
            font-size: 4vmin;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
            margin-top: 1.5vmin;
            min-height: 8vmin;
        }
        .button-primary:hover {
            filter: brightness(1.1);
        }
        .button-restart {
            background-color: #FF4500;
            color: #ffffff;
            padding: 1vmin;
            border-radius: 1vmin;
            width: 20vmin;
            font-size: 3.5vmin;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
            min-height: 6vmin;
        }
        .button-restart:hover {
            filter: brightness(1.1);
        }
        .button-restart.return-base {
            margin-top: 1.5vmin;
        }
        .button-restart.next-step {
            margin-top: 1.5vmin;
        }
        .flex-col-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .block-buttons {
            margin: 0.5vmin 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1vmin;
        }
        .mission-buttons-container {
            padding: 0.5vmin;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .navigation-arrows {
            display: flex;
            justify-content: center;
            margin: 0.5vmin 0;
        }
        .arrow-button {
            background-color: #FFD700;
            color: #4B0082;
            padding: 0.5vmin;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 4vmin;
            margin: 0 1vmin;
            transition: transform 0.2s;
            min-height: 6vmin;
            min-width: 6vmin;
        }
        .arrow-button:hover {
            transform: scale(1.1);
        }
        .arrow-button:disabled {
            background-color: #6b7280;
            cursor: not-allowed;
        }
        .menu-container {
            position: fixed;
            top: 1vmin;
            right: 1vmin;
            z-index: 3001;
        }
        .menu-button {
            background-color: #FFD700;
            color: #4B0082;
            padding: 1vmin 1.5vmin;
            border-radius: 0.5vmin;
            border: none;
            cursor: pointer;
            font-size: 3vmin;
            font-weight: bold;
            min-height: 6vmin;
        }
        .menu-dropdown {
            position: absolute;
            top: 7vmin;
            right: 0;
            background-color: #483D8B;
            border: 0.3vmin solid #FFD700;
            border-radius: 0.5vmin;
            padding: 1vmin;
            display: flex;
            flex-direction: column;
            gap: 1vmin;
        }
        .menu-item {
            background-color: #FF4500;
            color: #ffffff;
            padding: 1vmin 1.5vmin;
            border-radius: 0.5vmin;
            border: none;
            cursor: pointer;
            font-size: 3vmin;
            min-height: 6vmin;
        }
        .game-cover {
            width: 20vmin;
            height: 20vmin;
            margin: 1vmin auto;
            border: 0.3vmin solid #FFD700;
            border-radius: 1vmin;
            box-shadow: 0 0 1vmin rgba(255, 215, 0, 0.8);
            object-fit: cover;
        }
        .character-select-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5vmin;
            margin-top: 1.5vmin;
        }
        .character-button {
            padding: 1.5vmin;
            border-radius: 1vmin;
            border: 0.3vmin solid #FFD700;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 3vmin;
            color: #ffffff;
        }
        .character-button:hover {
            transform: scale(1.05);
            transition: transform 0.2s;
        }
        .character-image {
            width: 8vmin;
            height: 8vmin;
            border-radius: 0.5vmin;
            margin-bottom: 0.5vmin;
            object-fit: cover;
        }
        .selected-character {
            width: 8vmin;
            height: 8vmin;
            margin: 0.5vmin auto;
            border-radius: 0.5vmin;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5vmin;
            border: 0.3vmin solid #FFD700;
        }
        .character-game-display {
            width: 300px;
            height: 300px;
            margin: 0.5vmin auto;
            border-radius: 0.5vmin;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 0.3vmin solid #FFD700;
        }
        .selected-character-image {
            width: 100%;
            height: 100%;
            border-radius: 0.5vmin;
            object-fit: cover;
        }
        .feedback-correct {
            font-size: 4vmin;
            color: #FFD700;
            margin-top: 1vmin;
        }
        .feedback-incorrect {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-1vmin); }
            50% { transform: translateX(1vmin); }
            75% { transform: translateX(-1vmin); }
        }
        .highlight-word {
            font-size: 4vmin;
            color: #FFD700;
            margin-bottom: 1.5vmin;
        }
        .highlight-letter {
            color: #FF4500;
            font-weight: bold;
        }
        .star-award-container {
            position: absolute;
            top: 2vmin;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 2vmin;
            z-index: 2001;
        }
        .star-award {
            opacity: 0;
            color: #FFD700;
            text-shadow: 0 0 1vmin #FFD700;
            animation: starFadeIn 1s ease-in forwards;
        }
        .star-award:nth-child(1) {
            font-size: 2.5vmin;
            animation-delay: 0s;
        }
        .star-award:nth-child(2) {
            font-size: 3.5vmin;
            animation-delay: 1s;
        }
        .star-award:nth-child(3) {
            font-size: 2.5vmin;
            animation-delay: 2s;
        }
        @keyframes starFadeIn {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }
        .dialog-box {
            position: fixed;
            bottom: 10vmin;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(75, 0, 130, 0.9), rgba(0, 0, 0, 0.9));
            border: 0.3vmin solid #FFD700;
            border-radius: 1vmin;
            padding: 1vmin;
            display: flex;
            align-items: center;
            max-width: 90%;
            box-shadow: 0 0 2vmin rgba(255, 215, 0, 0.5);
            z-index: 2001;
            opacity: 0;
            animation: fadeInDialog 0.5s ease-in forwards;
        }
        @keyframes fadeInDialog {
            from { opacity: 0; transform: translateX(-50%) translateY(2vmin); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        .dialog-avatar {
            width: 8vmin;
            height: 8vmin;
            border-radius: 0.5vmin;
            margin-right: 1vmin;
            object-fit: cover;
        }
        .dialog-content {
            display: flex;
            flex-direction: column;
            color: #E6E6FA;
        }
        .dialog-name {
            font-size: 3vmin;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 0.5vmin;
        }
        .dialog-text {
            font-size: 3.5vmin;
            color: #E6E6FA;
            white-space: normal;
            word-wrap: break-word;
            line-height: 1.2;
            clip-path: inset(0 0 100% 0);
            animation: revealText 1.5s ease-out forwards;
        }
        @keyframes revealText {
            0% { clip-path: inset(0 0 100% 0); opacity: 0; }
            100% { clip-path: inset(0 0 0 0); opacity: 1; }
        }
        .monologue-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            animation: fadeInMonologue 1s ease-in forwards;
        }
        @keyframes fadeInMonologue {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .monologue-character {
            width: 20vmin;
            height: 20vmin;
            border-radius: 1vmin;
            margin-bottom: 2vmin;
            object-fit: cover;
            border: 0.3vmin solid #FFD700;
            box-shadow: 0 0 2vmin rgba(255, 215, 0, 0.5);
        }
        .monologue-text {
            font-size: 4vmin;
            color: #E6E6FA;
            text-align: center;
            max-width: 90%;
            margin-bottom: 2vmin;
            line-height: 1.2;
            clip-path: inset(0 0 100% 0);
            animation: revealText 3s ease-out forwards;
        }
        .monologue-button {
            background-color: #FF4500;
            color: #ffffff;
            padding: 1vmin;
            border-radius: 1vmin;
            font-size: 3.5vmin;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
            min-height: 6vmin;
        }
        .monologue-button:hover {
            filter: brightness(1.1);
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div id="root"></div>
    <script>
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = `${Math.random() * 0.3}vmin`;
            star.style.height = star.style.width;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 2}s`;
            starsContainer.appendChild(star);
        }
        for (let i = 0; i < 10; i++) {
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            meteor.style.left = `${Math.random() * 100}%`;
            meteor.style.top = `${Math.random() * -50}%`;
            meteor.style.animationDelay = `${Math.random() * 3}s`;
            starsContainer.appendChild(meteor);
        }

        let audioContext;
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
            console.error('–û—à–∏–±–∫–∞ Web Audio API:', e);
        }

        function playSound(frequency, duration, type = 'square', volume = 0.03335) {
            if (!audioContext) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.type = type;
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.start();
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playSequence(frequencies, durationPerNote, type = 'square', volume = 0.03335) {
            if (!audioContext) return;
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.type = type;
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * durationPerNote);
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime + index * durationPerNote);
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.start(audioContext.currentTime + index * durationPerNote);
                oscillator.stop(audioContext.currentTime + (index + 1) * durationPerNote);
            });
        }

        const allQuestions = [
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–õ–æ–∂–∫–∞"?', correct_answer: "–∫–æ—à–∫–∞", options: ["—Å–æ–±–∞–∫–∞", "–∫–æ—à–∫–∞", "–º—ã—à–∫–∞", "—Å—Ç–æ–ª"], word: "–ª–æ–∂–∫–∞", highlight: "–æ" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–î–∏–≤–∞–Ω"?', correct_answer: "—Ç—É–º–∞–Ω", options: ["–∫–æ—Ç", "—Ç—É–º–∞–Ω", "—Å—Ç—É–ª", "–ª–∞–º–ø–∞"], word: "–¥–∏–≤–∞–Ω", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≤–∞ "—Å–ª–æ–Ω"?', correct_answer: "—Å", options: ["–ª", "—Å", "–Ω", "–æ"], word: "—Å–ª–æ–Ω", highlight: "—Å" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –∫–æ–Ω—Ü–µ —Å–ª–æ–≤–∞ "–≥–ª–∞–∑"?', correct_answer: "—Å", options: ["–≥", "–∞", "—Ö", "—Å"], word: "–≥–ª–∞–∑", highlight: "—Å" },
            { question: '–ö–∞–∫–∞—è –≥–ª–∞—Å–Ω–∞—è –ø–æ–¥ —É–¥–∞—Ä–µ–Ω–∏–µ–º –≤ "–¢–µ–ª–µ–≤–∏–∑–æ—Ä"?', correct_answer: "–∏", options: ["–µ", "–∏", "–æ", "—Ä"], word: "—Ç–µ–ª–µ–≤–∏–∑–æ—Ä", highlight: "–∏" },
            { question: '–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∑–≤—É–∫ –≤ "–î–æ–º" –Ω–∞ "—Ç"?', correct_answer: "—Ç–æ–º", options: ["–∫–æ–º", "—Ç–æ–º", "—Å–æ–º", "–∫–æ–º"], word: "–¥–æ–º", highlight: "–¥" },
            { question: '–ù–∞–∑–æ–≤–∏ —Å–ª–æ–≤–æ, –Ω–∞—á–∏–Ω–∞—é—â–µ–µ—Å—è –Ω–∞ –∑–≤—É–∫ "–°–¢"', start_sound: "—Å—Ç", options: [] },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Å "—á" –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ?', correct_answer: "–∫–æ—á–µ—Ä–≥–∞", options: ["—Å–æ–±–∞–∫–∞", "–∫–æ—á–µ—Ä–≥–∞", "–º—ã—à–∫–∞", "–ª–æ–∂–∫–∞"] },
            { question: '–ß—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –∫ "–†—ã–±–∞" –¥–æ–±–∞–≤–∏—Ç—å "–∫"?', correct_answer: "—Ä—ã–±–∞–∫", options: ["—Ä—ã–±–∞–∫", "—Ä—ã–±–∞", "—Ä—ã–±–∫–∞", "—Ä—ã–±–æ–∫"], word: "—Ä—ã–±–∞", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "–∞"?', correct_answer: "–ª—É–Ω–∞", options: ["–∫–æ—Ç", "–¥–æ–º", "–ª—É–Ω–∞", "–ª–µ—Å"], word: "–ª—É–Ω–∞", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–Å–ª–∫–∞"?', correct_answer: "—á—ë–ª–∫–∞", options: ["—Ç—Ä–∞–≤–∞", "—Ç–µ–Ω—å", "—á—ë–ª–∫–∞", "–æ–∫–Ω–æ"], word: "—ë–ª–∫–∞", highlight: "—ë" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–ª–æ–≤–∞ "–º–µ–¥"?', correct_answer: "–µ", options: ["–º", "–µ", "–¥", "–æ"], word: "–º–µ–¥", highlight: "–µ" },
            { question: '–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∑–≤—É–∫ –≤ "–õ–µ—Å" –Ω–∞ "–≤"?', correct_answer: "–≤–µ—Å", options: ["–≤–µ—Å", "–ª–µ—Å", "–∫–µ—Å", "—Ä–µ—Å"], word: "–ª–µ—Å", highlight: "–ª" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≤–∞ "–ø—Ç–∏—Ü–∞"?', correct_answer: "–ø", options: ["—Ç", "–∏", "—Ü", "–ø"], word: "–ø—Ç–∏—Ü–∞", highlight: "–ø" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–†—É–±–∞—à–∫–∞"?', correct_answer: "–±—É–∫–∞—à–∫–∞", options: ["–º–∞—à–∏–Ω–∞", "—Å—Ç–æ–ª–∏–∫", "–±—É–∫–∞—à–∫–∞", "–¥–µ—Ä–µ–≤–æ"], word: "—Ä—É–±–∞—à–∫–∞", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –∫–æ–Ω—Ü–µ —Å–ª–æ–≤–∞ "–∫–æ—Ç"?', correct_answer: "—Ç", options: ["–∫", "–æ", "—Ç", "–∞"], word: "–∫–æ—Ç", highlight: "—Ç" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≤–∞ "—Ä–∞–∫–µ—Ç–∞"?', correct_answer: "—Ä", options: ["–∞", "–∫", "–µ", "—Ä"], word: "—Ä–∞–∫–µ—Ç–∞", highlight: "—Ä" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ "–ó–≤"?', correct_answer: "–∑–≤–µ–∑–¥–∞", options: ["–∑–≤–µ–∑–¥–∞", "—Å–æ–ª–Ω—Ü–µ", "–¥–µ—Ä–µ–≤–æ", "—Ä–µ–∫–∞"], word: "–∑–≤–µ–∑–¥–∞", highlight: "–∑" },
            { question: '–ß—Ç–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–ü–µ—Å"?', correct_answer: "–ª–µ—Å", options: ["–¥–æ–º", "—Å–æ–Ω", "–∫–æ—Ç", "–ª–µ—Å"], word: "–ø–µ—Å", highlight: "–µ" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–ª–æ–≤–∞ "–ª—É–Ω–∞"?', correct_answer: "—É", options: ["–ª", "—É", "–Ω", "–∞"], word: "–ª—É–Ω–∞", highlight: "—É" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–°–ª–æ–Ω"?', correct_answer: "—Å–æ–Ω", options: ["—Å–æ–Ω", "–¥–æ–º", "–ª–µ—Å", "—Ä–µ–∫–∞"], word: "—Å–ª–æ–Ω", highlight: "–æ" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –∫–æ–Ω—Ü–µ —Å–ª–æ–≤–∞ "–∑–≤–µ–∑–¥–∞"?', correct_answer: "–∞", options: ["–∑", "–∞", "–µ", "–≤"], word: "–∑–≤–µ–∑–¥–∞", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≤–∞ "—Å–≤–µ—Ç"?', correct_answer: "—Å", options: ["–≤", "–µ", "—Ç", "—Å"], word: "—Å–≤–µ—Ç", highlight: "—Å" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ –∫–æ–Ω—Ü–µ —Å–ª–æ–≤–∞ "–¥–æ–º"?', correct_answer: "–º", options: ["–æ", "–¥", "–∞", "–º"], word: "–¥–æ–º", highlight: "–º" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–ó–≤–µ–∑–¥–∞"?', correct_answer: "–±–µ–¥–∞", options: ["–ª—É–Ω–∞", "–ø—Ç–∏—Ü–∞", "–≥–æ—Ä–∞", "–±–µ–¥–∞"], word: "–∑–≤–µ–∑–¥–∞", highlight: "–∞" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–ö–æ—Å–º–æ—Å"?', correct_answer: "–∫–æ–ª–æ—Å", options: ["–≥–æ–ª–æ—Å", "–∑–≤—É–∫", "–æ–≥–æ–Ω—å", "–≤–æ–¥–∞"], word: "–∫–æ—Å–º–æ—Å", highlight: "–æ" },
            { question: '–ß—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –∏–∑ "–ú—è—Ç" —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º "–∞"?', correct_answer: "–º—è—Ç–∞", options: ["–¥–∞—Ç–∞", "–º—è—Ç–∞", "–º–∞—Ç—ã", "–∫–∞—Ç–∞"], word: "–º—è—Ç", highlight: "—è" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Å "—Ä" –≤ –Ω–∞—á–∞–ª–µ?', correct_answer: "—Ä–∞–∫–µ—Ç–∞", options: ["–ª—É–Ω–∞", "–∫–ª—É–±–æ–∫", "—Ä–∞–∫–µ—Ç–∞", "—Ç—Ä–∞–≤–∞"] },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–ì–∞—Ä–º–æ—à–∫–∞"?', correct_answer: "–∫–∞—Ä—Ç–æ—à–∫–∞", options: ["—è–±–ª–æ–∫–æ", "–∫–∞—Ä—Ç–æ—à–∫–∞", "—Ü–≤–µ—Ç–æ–∫", "—Å—Ç–æ–ª"], word: "–≥–∞—Ä–º–æ—à–∫–∞", highlight: "–æ" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–†–µ–∫–∞"?', correct_answer: "—Ä—É–∫–∞", options: ["–∫–æ–º–æ–∫", "–ª–µ—Å", "–¥–æ–º", "—Ä—É–∫–∞"], word: "—Ä–µ–∫–∞", highlight: "–µ" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–ú—è—á"?', correct_answer: "–ø–ª–∞—á", options: ["—Å–º–µ—Ö", "–∏–≥—Ä–∞", "–ø–ª–∞—á", "—Å–æ–Ω"], word: "–º—è—á", highlight: "—è" },
            { question: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ä–∏—Ñ–º—É–µ—Ç—Å—è —Å "–°–≤–µ—Ç"?', correct_answer: "—Ü–≤–µ—Ç", options: ["–¥–µ–Ω—å", "—Ü–≤–µ—Ç", "–Ω–æ—á—å", "–æ–≥–æ–Ω—å"], word: "—Å–≤–µ—Ç", highlight: "–µ" },
            { question: '–ö–∞–∫–æ–π –∑–≤—É–∫ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–ª–æ–≤–∞ "–∫–æ—Ç–∏–∫"?', correct_answer: "—Ç", options: ["–∫", "–æ", "—Ç", "–∏"], word: "–∫–æ—Ç–∏–∫", highlight: "—Ç" }
        ];

        const shuffledQuestions = [...allQuestions].sort(() => Math.random() - 0.5);
        const missions = [];
        for (let i = 0; i < 9; i++) {
            const start = i * 4;
            const end = i === 8 ? 33 : start + 4;
            const missionQuestions = shuffledQuestions.slice(start, end);
            missions.push(missionQuestions.map((task, index) => ({ ...task, localIndex: index })));
        }

        const questionsPerMission = [4, 4, 4, 4, 4, 4, 4, 4, 1];

        const characters = [
            { 
                name: "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –ó–≤—ë–∑–¥–Ω—ã–π", 
                color: "#1E90FF", 
                image: "https://github.com/Ray0fHope/-/raw/main/character_1_top_left.png",
                correctResponses: [
                    "–¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏!",
                    "–ù–µ —Å–¥–∞–≤–∞–π—Å—è, —Ç—ã –ø–æ—á—Ç–∏ —É —Ü–µ–ª–∏!",
                    "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –¢—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è!"
                ]
            },
            { 
                name: "–°—É–ø–µ—Ä-–≠–ª–µ–∫—Ç—Ä–æ –†—ç–π", 
                color: "#32CD32", 
                image: "https://github.com/Ray0fHope/-/raw/main/character_2_top_right.png",
                correctResponses: [
                    "–ü–æ–¥–±–µ—Ä–∏ –∫ —Å–ª–æ–≤–∞–º –≤—Å–µ –±—É–∫–≤—ã, –∏ —Ç—ã —Å–º–æ–∂–µ—à—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å!",
                    "–°–º–æ—Ç—Ä–∏, –∫–∞–∫ –±—É–∫–≤—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ —Å–ª–æ–≤–∞ ‚Äî —Ç—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!",
                    "–£ —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞–π!"
                ]
            },
            { 
                name: "–ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä –ì–∞–ª–∞–∫—Å–∏–∫—É—Å", 
                color: "#FF4500", 
                image: "https://github.com/Ray0fHope/-/raw/main/character_3_bottom_left.png",
                correctResponses: [
                    "–ö–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –º–µ–Ω—è –∫ –¥–æ–º—É!",
                    "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–∫–æ—Ä–æ —É–≤–∏–∂—É —Å–≤–æ—é –ø–ª–∞–Ω–µ—Ç—É!",
                    "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –¢—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è!"
                ]
            },
            { 
                name: "–†–æ–±–±–∏ –ò–Ω—Ñ–æ–¢—Ä–æ–Ω", 
                color: "#800080", 
                image: "https://github.com/Ray0fHope/-/raw/main/character_4_bottom_right.png",
                correctResponses: [
                    "–¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏!",
                    "–£ —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞–π!",
                    "–°–º–æ—Ç—Ä–∏, –∫–∞–∫ –±—É–∫–≤—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ —Å–ª–æ–≤–∞ ‚Äî —Ç—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!"
                ]
            }
        ];

        const monologue = [
            "–Ø –≤—Å–µ–≥–¥–∞ –º–µ—á—Ç–∞–ª –æ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã, –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –º–∏—Ä—ã ‚Äî —ç—Ç–æ –±—ã–ª–æ –º–æ–µ–π —Ü–µ–ª—å—é. –ù–æ –∫–æ–≥–¥–∞ —è –ø—Ä–∏–∑–µ–º–ª–∏–ª—Å—è –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–Ω—É—é, –∑–≤—É–∫–æ–≤—É—é –ø–ª–∞–Ω–µ—Ç—É, –≤—Å–µ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ú–æ–π –∫–æ—Ä–∞–±–ª—å –ø–æ—Ç–µ—Ä—è–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑-–∑–∞ –º–æ—â–Ω–æ–π –≤–æ–ª–Ω—ã –∑–≤—É–∫–æ–≤ –∏ –±—É–∫–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤–æ–∫—Ä—É–≥ –º–µ–Ω—è. –Ø –∑–∞—Å—Ç—Ä—è–ª –≤ —ç—Ç–æ–º —Å—Ç—Ä–∞–Ω–Ω–æ–º –∏–∑–º–µ—Ä–µ–Ω–∏–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π –∑–≤—É–∫ –∏ –±—É–∫–≤–∞ ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å –∑–∞–≥–∞–¥–∫–∏, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Ä–∞–∑–≥–∞–¥–∞—Ç—å.",
            "–ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π, –º–Ω–µ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —ç—Ç–∏ –∑–≤—É–∫–∏ –∏ –±—É–∫–≤—ã. –ö–∞–∂–¥–∞—è –∏–∑ –Ω–∏—Ö ‚Äî —ç—Ç–æ –∫–ª—é—á –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–æ–µ–≥–æ –∫–æ—Ä–∞–±–ª—è. –Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –≤—Ä–µ–º—è —É—Ö–æ–¥–∏—Ç, –∏ –º–Ω–µ –Ω—É–∂–Ω–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ. –Ø –Ω–µ –º–æ–≥—É –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ —Å–¥–∞—Ç—å—Å—è. –Ø –¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —ç—Ç–∏ –∑–≤—É–∫–∏ –∏ –±—É–∫–≤—ã, —Å–æ–µ–¥–∏–Ω–∏—Ç—å –∏—Ö –≤–º–µ—Å—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å. –¢–æ–ª—å–∫–æ —Ç–∞–∫ —è —Å–º–æ–≥—É –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–≤–æ—é —Ä–æ–¥–Ω—É—é –ø–ª–∞–Ω–µ—Ç—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–≤–æ–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –º–æ—è –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–∞–¥–µ–∂–¥–∞, –∏ —è –Ω–µ —Å–æ–±–∏—Ä–∞—é—Å—å –µ–µ —É–ø—É—Å—Ç–∏—Ç—å!"
        ];

        function SplashScreen({ onFadeOut }) {
            React.useEffect(() => {
                const timer = setTimeout(() => {
                    onFadeOut();
                }, 3000);
                return () => clearTimeout(timer);
            }, [onFadeOut]);

            return React.createElement(
                'div',
                { className: 'splash-screen' },
                React.createElement('img', {
                    src: 'https://raw.githubusercontent.com/Ray0fHope/-/main/%D0%B7%D0%B0%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0.png',
                    alt: 'Splash Screen',
                    className: 'splash-image'
                })
            );
        }

        function ErrorMessage({ message }) {
            return React.createElement(
                'div',
                { className: 'quiz-container card' },
                React.createElement('h1', { className: 'title-large' }, 'üöÄ –û—à–∏–±–∫–∞!'),
                React.createElement('p', { className: 'text-medium' }, message)
            );
        }

        function RocketFinal({ isFlying }) {
            return React.createElement(
                'div',
                { className: `rocket-final ${isFlying ? 'flying' : ''}`, style: { left: '0%' } },
                'üöÄ'
            );
        }

        function CelebrationFallback({ show }) {
            if (!show) return null;
            const confetti = Array.from({ length: 200 }).map((_, i) =>
                React.createElement('div', {
                    key: `confetti-${i}`,
                    className: 'confetti',
                    style: {
                        left: `${Math.random() * 100}%`,
                        animationDelay: `${Math.random() * 1}s`,
                        animationDuration: `${1.5 + Math.random() * 1}s`
                    }
                })
            );
            return React.createElement('div', { className: 'celebration-container' }, confetti);
        }

        function StarAwards({ show }) {
            if (!show) return null;
            return React.createElement(
                'div',
                { className: 'star-award-container' },
                React.createElement('span', { className: 'star-award' }, '‚≠ê'),
                React.createElement('span', { className: 'star-award' }, '‚≠ê'),
                React.createElement('span', { className: 'star-award' }, '‚≠ê')
            );
        }

        function DialogBox({ character, text }) {
            const textRef = React.useRef(null);

            React.useEffect(() => {
                if (textRef.current) {
                    textRef.current.style.height = 'auto';
                    textRef.current.style.height = `${textRef.current.scrollHeight}px`;
                }
            }, [text]);

            if (!character || !text) return null;
            return React.createElement(
                'div',
                { className: 'dialog-box', style: { background: `linear-gradient(135deg, ${character.color}, rgba(0, 0, 0, 0.9))` } },
                React.createElement('img', {
                    src: character.image,
                    alt: character.name,
                    className: 'dialog-avatar'
                }),
                React.createElement(
                    'div',
                    { className: 'dialog-content' },
                    React.createElement('span', { className: 'dialog-name' }, character.name),
                    React.createElement('span', { className: 'dialog-text', ref: textRef }, text)
                )
            );
        }

        function MonologueScreen({ character, onComplete }) {
            const [currentParagraph, setCurrentParagraph] = React.useState(0);
            const textRef = React.useRef(null);

            React.useEffect(() => {
                if (textRef.current) {
                    textRef.current.style.height = 'auto';
                    textRef.current.style.height = `${textRef.current.scrollHeight}px`;
                }
            }, [currentParagraph]);

            const handleNext = () => {
                if (currentParagraph < monologue.length - 1) {
                    setCurrentParagraph(currentParagraph + 1);
                } else {
                    onComplete();
                }
            };

            return React.createElement(
                'div',
                { className: 'monologue-screen' },
                React.createElement('img', {
                    src: character.image,
                    alt: character.name,
                    className: 'monologue-character'
                }),
                React.createElement('p', { className: 'monologue-text', key: currentParagraph, ref: textRef }, monologue[currentParagraph]),
                React.createElement(
                    'button',
                    { className: 'monologue-button', onClick: handleNext },
                    currentParagraph < monologue.length - 1 ? '–î–∞–ª–µ–µ' : '–ù–∞—á–∞—Ç—å'
                )
            );
        }

        function Menu({ currentPage, setCurrentPage, onBack }) {
            const [isOpen, setIsOpen] = React.useState(false);
            return React.createElement(
                'div',
                { className: 'menu-container' },
                React.createElement(
                    'button',
                    { className: 'menu-button', onClick: () => setIsOpen(!isOpen) },
                    '–ú–µ–Ω—é'
                ),
                isOpen && React.createElement(
                    'div',
                    { className: 'menu-dropdown' },
                    currentPage !== 'main' && currentPage !== 'character-select' && React.createElement(
                        'button',
                        { className: 'menu-item', onClick: onBack },
                        '–ù–∞–∑–∞–¥'
                    ),
                    React.createElement(
                        'button',
                        { className: 'menu-item', onClick: () => { setCurrentPage('rules'); setIsOpen(false); } },
                        '–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã'
                    ),
                    React.createElement(
                        'button',
                        { className: 'menu-item', onClick: () => { setCurrentPage('teacher'); setIsOpen(false); } },
                        '–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã'
                    ),
                    currentPage !== 'main' && currentPage !== 'character-select' && React.createElement(
                        'button',
                        { className: 'menu-item', onClick: () => { setCurrentPage('main'); setIsOpen(false); } },
                        '–ù–∞ –≥–ª–∞–≤–Ω—É—é'
                    ),
                    React.createElement(
                        'button',
                        { className: 'menu-item', onClick: () => { setCurrentPage('character-select'); setIsOpen(false); } },
                        '–í—ã–±—Ä–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞'
                    )
                )
            );
        }

        function QuizApp() {
            const [currentPage, setCurrentPage] = React.useState('splash');
            const [currentTaskIndex, setCurrentTaskIndex] = React.useState(0);
            const [currentMission, setCurrentMission] = React.useState(0);
            const [userAnswer, setUserAnswer] = React.useState('');
            const [isStarted, setIsStarted] = React.useState(false);
            const [isFinished, setIsFinished] = React.useState(false);
            const [error, setError] = React.useState(null);
            const [imagePosition, setImagePosition] = React.useState(0);
            const [isRocketFlying, setIsRocketFlying] = React.useState(false);
            const [glowKey, setGlowKey] = React.useState(0);
            const [showFireworks, setShowFireworks] = React.useState(false);
            const [missionProgress, setMissionProgress] = React.useState(Array(9).fill(0));
            const [missionCompleted, setMissionCompleted] = React.useState(Array(9).fill(false));
            const [showMissionCelebration, setShowMissionCelebration] = React.useState(false);
            const [showStarAwards, setShowStarAwards] = React.useState(false);
            const [feedbackState, setFeedbackState] = React.useState(null);
            const [selectedCharacter, setSelectedCharacter] = React.useState(null);
            const [currentMissionPage, setCurrentMissionPage] = React.useState(0);
            const [dialogText, setDialogText] = React.useState('');
            const [showMonologue, setShowMonologue] = React.useState(false);
            const finalScreenRef = React.useRef(null);

            const tasks = missions[currentMission] || [];
            const questionsInCurrentMission = questionsPerMission[currentMission];
            const sectionWidth = 100 / questionsInCurrentMission;
            const filledSections = Math.min(missionProgress[currentMission], questionsInCurrentMission);

            const missionsPerPage = 3;
            const totalMissionPages = Math.ceil(missions.length / missionsPerPage);
            const startMissionIndex = currentMissionPage * missionsPerPage;
            const endMissionIndex = startMissionIndex + missionsPerPage;
            const displayedMissions = missions.slice(startMissionIndex, endMissionIndex);

            const handlePreviousPage = () => {
                if (currentMissionPage > 0) {
                    setCurrentMissionPage(currentMissionPage - 1);
                }
            };

            const handleNextPage = () => {
                if (currentMissionPage < totalMissionPages - 1) {
                    setCurrentMissionPage(currentMissionPage + 1);
                }
            };

            const getQuestionNumberInMission = () => {
                return missionProgress[currentMission] + 1;
            };

            const resetState = (mission) => {
                setIsStarted(true);
                setCurrentMission(mission);
                setCurrentTaskIndex(0);
                setUserAnswer('');
                setIsFinished(false);
                setError(null);
                setImagePosition(0);
                setIsRocketFlying(false);
                setGlowKey(0);
                setShowFireworks(false);
                setShowMissionCelebration(false);
                setShowStarAwards(false);
                setFeedbackState(null);
                setDialogText('');
                let newMissionProgress = [...missionProgress];
                newMissionProgress[mission] = 0;
                setMissionProgress(newMissionProgress);
            };

            const handleStart = (mission) => {
                if (!selectedCharacter) {
                    setCurrentPage('character-select');
                    return;
                }
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        resetState(mission);
                        setCurrentPage('game');
                    });
                } else {
                    resetState(mission);
                    setCurrentPage('game');
                }
            };

            const handleRestart = () => {
                resetState(currentMission);
            };

            const handleReturnToBase = () => {
                setIsStarted(false);
                setCurrentMission(0);
                setCurrentTaskIndex(0);
                setUserAnswer('');
                setIsFinished(false);
                setError(null);
                setImagePosition(0);
                setIsRocketFlying(false);
                setGlowKey(0);
                setShowFireworks(false);
                setShowMissionCelebration(false);
                setShowStarAwards(false);
                setFeedbackState(null);
                setDialogText('');
                setCurrentPage('main');
                setCurrentMissionPage(0);
            };

            const triggerCelebration = () => {
                setShowMissionCelebration(true);
                playSequence([440, 554, 659, 880], 0.25, 'square');
                setTimeout(() => setShowMissionCelebration(false), 4000);
            };

            const handleAnswer = (selectedAnswer) => {
                if (!tasks[currentTaskIndex]) {
                    setError('–ó–∞–¥–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
                    return;
                }
                const task = tasks[currentTaskIndex];
                const isCorrect = task.question.startsWith('–ù–∞–∑–æ–≤–∏ —Å–ª–æ–≤–æ')
                    ? selectedAnswer.trim().toLowerCase().startsWith(task.start_sound)
                    : selectedAnswer.trim().toLowerCase() === task.correct_answer.toLowerCase();

                if (isCorrect) {
                    setFeedbackState('correct');
                    playSequence([440, 554, 659], 0.2, 'square');
                    setShowFireworks(true);
                    setTimeout(() => setShowFireworks(false), 1000);
                    const responses = selectedCharacter.correctResponses;
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    setDialogText(randomResponse);
                    setTimeout(() => setDialogText(''), 3000);
                } else {
                    setFeedbackState('incorrect');
                    playSound(200, 0.3, 'square');
                    setDialogText('');
                }

                let newMissionProgress = [...missionProgress];
                newMissionProgress[currentMission] = Math.min(newMissionProgress[currentMission] + 1, questionsInCurrentMission);
                setMissionProgress(newMissionProgress);
                setImagePosition((newMissionProgress[currentMission] / questionsInCurrentMission) * 100);
                setUserAnswer('');
                setGlowKey(glowKey + 1);

                if (currentTaskIndex + 1 < tasks.length) {
                    setCurrentTaskIndex(currentTaskIndex + 1);
                } else {
                    let newMissionCompleted = [...missionCompleted];
                    newMissionCompleted[currentMission] = true;
                    setMissionCompleted(newMissionCompleted);
                    triggerCelebration();
                    if (currentMission === 8) {
                        setShowStarAwards(true);
                    }
                    if (newMissionCompleted.every(completed => completed)) {
                        setIsFinished(true);
                    }
                }
            };

            const handleNextMission = () => {
                if (currentMission < 8) {
                    resetState(currentMission + 1);
                } else {
                    handleReturnToBase();
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && userAnswer.trim()) handleAnswer(userAnswer);
            };

            const handleSplashFadeOut = () => {
                setCurrentPage('character-select');
            };

            const handleCharacterSelect = (character) => {
                setSelectedCharacter(character);
                setShowMonologue(true);
            };

            const handleMonologueComplete = () => {
                setShowMonologue(false);
                setCurrentPage('main');
            };

            React.useEffect(() => {
                if (isFinished) {
                    setTimeout(() => setIsRocketFlying(true), 1000);
                    setTimeout(() => triggerCelebration(), 100);
                }
            }, [isFinished]);

            const getMissionStatus = (mission) => {
                return missionCompleted[mission] ? '‚≠ê' : '';
            };

            const highlightWord = (word, letter) => {
                if (!word || !letter) return word;
                const index = word.toLowerCase().indexOf(letter.toLowerCase());
                if (index === -1) return word;
                return (
                    word.substring(0, index) +
                    `<span class="highlight-letter">${word[index]}</span>` +
                    word.substring(index + 1)
                );
            };

            if (currentPage === 'splash') {
                return React.createElement(SplashScreen, { onFadeOut: handleSplashFadeOut });
            }

            if (showMonologue) {
                return React.createElement(MonologueScreen, {
                    character: selectedCharacter,
                    onComplete: handleMonologueComplete
                });
            }

            if (currentPage === 'character-select') {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: () => setCurrentPage('main') }),
                    React.createElement(
                        'div',
                        { className: 'quiz-container card' },
                        React.createElement('h1', { className: 'title-large' }, '–í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞'),
                        React.createElement('p', { className: 'text-medium' }, '–ö—Ç–æ –±—É–¥–µ—Ç —Ç–≤–æ–∏–º —Å–ø—É—Ç–Ω–∏–∫–æ–º –≤ –∫–æ—Å–º–æ—Å–µ?'),
                        React.createElement(
                            'div',
                            { className: 'character-select-grid' },
                            characters.map((character, index) =>
                                React.createElement(
                                    'button',
                                    {
                                        key: index,
                                        className: 'character-button',
                                        style: { backgroundColor: character.color },
                                        onClick: () => handleCharacterSelect(character)
                                    },
                                    React.createElement('img', {
                                        src: character.image,
                                        alt: character.name,
                                        className: 'character-image'
                                    }),
                                    React.createElement('span', null, character.name)
                                )
                            )
                        )
                    )
                ];
            }

            if (currentPage === 'main') {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: () => setCurrentPage('character-select') }),
                    React.createElement(
                        'div',
                        { className: 'quiz-container card' },
                        React.createElement('h1', { className: 'title-large' }, 'üöÄ –í—Å–µ–ª–µ–Ω–Ω–∞—è –∑–≤—É–∫–∞'),
                        React.createElement('img', {
                            src: 'https://raw.githubusercontent.com/Ray0fHope/-/main/QLZ8aPLXUhMXPjxaKXDIfI8z05y2vdg3Kzqb9JDjGRJ1mLstsbd06hNdmBiv5yBLRMmMGhcitgt3lOWnYCmLyMs9.jpg',
                            alt: 'Game Cover',
                            className: 'game-cover'
                        }),
                        selectedCharacter && React.createElement(
                            'div',
                            { className: 'selected-character', style: { backgroundColor: selectedCharacter.color } },
                            React.createElement('img', {
                                src: selectedCharacter.image,
                                alt: selectedCharacter.name,
                                className: 'selected-character-image'
                            })
                        ),
                        React.createElement('p', { className: 'text-medium' }, '–í—ã–±–µ—Ä–∏ —à–∞–≥ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Å—è –≤ –∫–æ—Å–º–æ—Å!'),
                        React.createElement(
                            'div',
                            { className: 'flex-col-center' },
                            React.createElement(
                                'div',
                                { className: 'navigation-arrows' },
                                React.createElement(
                                    'button',
                                    {
                                        className: 'arrow-button',
                                        onClick: handlePreviousPage,
                                        disabled: currentMissionPage === 0
                                    },
                                    '‚Üë'
                                )
                            ),
                            React.createElement(
                                'div',
                                { className: 'mission-buttons-container' },
                                displayedMissions.map((_, index) => {
                                    const missionIndex = startMissionIndex + index;
                                    return React.createElement(
                                        'div',
                                        { key: missionIndex, className: 'block-buttons' },
                                        React.createElement(
                                            'button',
                                            { onClick: () => handleStart(missionIndex), className: 'button-restart' },
                                            `–®–∞–≥ ${missionIndex + 1}`
                                        ),
                                        React.createElement(
                                            'span',
                                            { style: { color: '#FFD700', fontSize: '2vmin' } },
                                            getMissionStatus(missionIndex)
                                        )
                                    );
                                })
                            ),
                            React.createElement(
                                'div',
                                { className: 'navigation-arrows' },
                                React.createElement(
                                    'button',
                                    {
                                        className: 'arrow-button',
                                        onClick: handleNextPage,
                                        disabled: currentMissionPage === totalMissionPages - 1
                                    },
                                    '‚Üì'
                                )
                            )
                        )
                    )
                ];
            }

            if (currentPage === 'rules') {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: () => setCurrentPage('main') }),
                    React.createElement(
                        'div',
                        { className: 'quiz-container card' },
                        React.createElement('h1', { className: 'title-large' }, '–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã'),
                        React.createElement('p', { className: 'text-medium' }, '–¶–µ–ª—å –∏–≥—Ä—ã ‚Äî –ø–æ–º–æ—á—å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–º—É –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∑–≤—É–∫–∞—Ö –∏ —Å–ª–æ–≤–∞—Ö.'),
                        React.createElement('p', { className: 'text-medium' }, '1. –í—ã–±–µ—Ä–∏ —à–∞–≥ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ.'),
                        React.createElement('p', { className: 'text-medium' }, '2. –û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –≤—ã–±–∏—Ä–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–ª–∏ –≤–≤–æ–¥—è —Å–ª–æ–≤–æ.'),
                        React.createElement('p', { className: 'text-medium' }, '3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —à–∞–≥–∞ —Ç—ã –ø–æ–ª—É—á–∏—à—å –∑–≤—ë–∑–¥–æ—á–∫—É!'),
                        React.createElement('p', { className: 'text-medium' }, '4. –ü—Ä–æ–π–¥–∏ –≤—Å–µ —à–∞–≥–∏, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!')
                    )
                ];
            }

            if (currentPage === 'teacher') {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: () => setCurrentPage('main') }),
                    React.createElement(
                        'div',
                        { className: 'quiz-container card' },
                        React.createElement('h1', { className: 'title-large' }, '–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã'),
                        React.createElement('p', { className: 'text-medium' }, '–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–µ–¥–∞–≥–æ–≥–æ–≤:'),
                        React.createElement('p', { className: 'text-medium' }, '–ò–≥—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ñ–æ–Ω–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª—É—Ö –∏ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–æ –∑–≤—É–∫–∞–º–∏.'),
                        React.createElement('h2', { className: 'title-medium' }, '–§–∏–∑–º–∏–Ω—É—Ç–∫–∞'),
                        React.createElement('p', { className: 'text-medium' }, '–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –¥–µ—Ç—è–º –≤—Å—Ç–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è:'),
                        React.createElement('p', { className: 'text-medium' }, '1. –ü–æ–¥–Ω–∏–º–∏—Ç–µ —Ä—É–∫–∏ –≤–≤–µ—Ä—Ö, –∫–∞–∫ —Ä–∞–∫–µ—Ç–∞, –∏ —Å–∫–∞–∂–∏—Ç–µ "–í–∑–ª—ë—Ç!".'),
                        React.createElement('p', { className: 'text-medium' }, '2. –ü–æ–∫—Ä—É–∂–∏—Ç–µ—Å—å, –∫–∞–∫ –∑–≤—ë–∑–¥—ã, –∏ —Å–∫–∞–∂–∏—Ç–µ "–°–∏—è–µ–º!".'),
                        React.createElement('p', { className: 'text-medium' }, '3. –ü—Ä–∏—Å—è–¥—å—Ç–µ –∏ —Å–∫–∞–∂–∏—Ç–µ "–ü—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ!".')
                    )
                ];
            }

            if (error) {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: handleReturnToBase }),
                    React.createElement(ErrorMessage, { message: error })
                ];
            }

            if (missionProgress[currentMission] === questionsInCurrentMission) {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: handleReturnToBase }),
                    currentMission === 8 && React.createElement(StarAwards, { show: showStarAwards }),
                    React.createElement(
                        'div',
                        { className: 'quiz-container card flex-col-center' },
                        React.createElement('h1', { className: 'title-large' }, 'üéâ –®–∞–≥ –∑–∞–≤–µ—Ä—à—ë–Ω!'),
                        React.createElement('p', { className: 'text-xlarge' }, '–¢—ã –º–æ–ª–æ–¥–µ—Ü, –ø–æ–ª–µ—Ç–µ–ª–∏ –¥–∞–ª—å—à–µ!'),
                        currentMission !== 8 && React.createElement('p', { className: 'text-large' }, '–¢—ã –ø–æ–ª—É—á–∏–ª: ‚≠ê'),
                        selectedCharacter && React.createElement(
                            'div',
                            { className: 'selected-character', style: { backgroundColor: selectedCharacter.color } },
                            React.createElement('img', {
                                src: selectedCharacter.image,
                                alt: selectedCharacter.name,
                                className: 'selected-character-image'
                            })
                        ),
                        React.createElement(
                            'button',
                            { onClick: handleRestart, className: 'button-restart' },
                            '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —à–∞–≥'
                        ),
                        currentMission < 8 && React.createElement(
                            'button',
                            { onClick: handleNextMission, className: 'button-restart next-step' },
                            '–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥'
                        ),
                        React.createElement(
                            'button',
                            { onClick: handleReturnToBase, className: 'button-restart return-base' },
                            '–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –±–∞–∑—É'
                        )
                    ),
                    React.createElement(CelebrationFallback, { show: showMissionCelebration })
                ];
            }

            if (isFinished) {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: handleReturnToBase }),
                    React.createElement(
                        'div',
                        { ref: finalScreenRef, className: 'quiz-container card flex-col-center' },
                        React.createElement('h1', { className: 'title-large' }, 'üöÄ –í—Å–µ —à–∞–≥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã!'),
                        React.createElement('p', { className: 'text-large' }, '–¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —à–∞–≥–∏!'),
                        React.createElement('p', { className: 'text-xlarge' }, '–¢–≤–æ—è –Ω–∞–≥—Ä–∞–¥–∞: ‚≠ê‚≠ê‚≠ê'),
                        selectedCharacter && React.createElement(
                            'div',
                            { className: 'selected-character', style: { backgroundColor: selectedCharacter.color } },
                            React.createElement('img', {
                                src: selectedCharacter.image,
                                alt: selectedCharacter.name,
                                className: 'selected-character-image'
                            })
                        ),
                        React.createElement(
                            'button',
                            { onClick: handleRestart, className: 'button-restart' },
                            '–ù–æ–≤—ã–π –ø–æ–ª—ë—Ç'
                        ),
                        React.createElement(
                            'button',
                            { onClick: handleReturnToBase, className: 'button-restart return-base' },
                            '–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –±–∞–∑—É'
                        )
                    ),
                    React.createElement(CelebrationFallback, { show: showMissionCelebration }),
                    React.createElement(RocketFinal, { isFlying: isRocketFlying })
                ];
            }

            if (!tasks[currentTaskIndex]) {
                return [
                    React.createElement(Menu, { currentPage, setCurrentPage, onBack: handleReturnToBase }),
                    React.createElement(ErrorMessage, { message: '–ó–∞–¥–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ' })
                ];
            }

            const task = tasks[currentTaskIndex];
            const questionNumber = getQuestionNumberInMission();

            return [
                React.createElement(Menu, { currentPage, setCurrentPage, onBack: handleReturnToBase }),
                React.createElement(
                    'div',
                    { className: 'progress-container' },
                    React.createElement(
                        'span',
                        { className: 'progress-label' },
                        `–®–∞–≥ ${currentMission + 1}: –í–æ–ø—Ä–æ—Å ${questionNumber}/${questionsInCurrentMission}`
                    ),
                    React.createElement(
                        'div',
                        { className: 'progress-bar' },
                        Array.from({ length: questionsInCurrentMission - 1 }, (_, i) =>
                            React.createElement('div', {
                                key: i,
                                className: 'progress-mark',
                                style: { left: `${(i + 1) * sectionWidth}%` }
                            })
                        ),
                        React.createElement(
                            'div',
                            {
                                className: 'progress-section',
                                style: {
                                    width: `${(filledSections / questionsInCurrentMission) * 100}%`
                                }
                            },
                            React.createElement('div', {
                                key: glowKey,
                                className: 'glow-effect',
                                style: {
                                    width: `${sectionWidth}%`
                                }
                            })
                        ),
                        selectedCharacter && React.createElement(
                            'img',
                            {
                                src: 'https://github.com/Ray0fHope/-/raw/main/–º–∞–ª—å—á–∏–∫.png',
                                alt: 'Character on Rocket',
                                className: `character-on-rocket ${feedbackState === 'correct' ? 'cheer' : feedbackState === 'incorrect' ? 'surprise' : ''}`,
                                style: { left: `${imagePosition}%` }
                            }
                        )
                    )
                ),
                React.createElement(
                    'div',
                    { className: `quiz-container card flex-col-center ${feedbackState === 'incorrect' ? 'feedback-incorrect' : ''}` },
                    React.createElement('h1', { className: 'title-medium' }, `–®–∞–≥ ${currentMission + 1}`),
                    React.createElement('p', { className: 'text-medium' }, task.question),
                    task.word && task.highlight && React.createElement(
                        'div',
                        { className: 'highlight-word', dangerouslySetInnerHTML: { __html: highlightWord(task.word, task.highlight) } }
                    ),
                    task.question.startsWith('–ù–∞–∑–æ–≤–∏ —Å–ª–æ–≤–æ')
                        ? [
                            React.createElement('input', {
                                type: 'text',
                                value: userAnswer,
                                onChange: (e) => setUserAnswer(e.target.value),
                                onKeyPress: handleKeyPress,
                                className: 'input-field',
                                placeholder: '–¢–≤–æ–π –æ—Ç–≤–µ—Ç',
                                autoFocus: true,
                                key: 'input'
                            }),
                            React.createElement(
                                'button',
                                {
                                    onClick: () => handleAnswer(userAnswer),
                                    disabled: !userAnswer.trim(),
                                    className: 'button-primary',
                                    key: 'submit'
                                },
                                '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'
                            )
                          ]
                        : React.createElement(
                            'div',
                            { className: 'options-grid' },
                            task.options.map((option, index) =>
                                React.createElement(
                                    'button',
                                    {
                                        key: index,
                                        onClick: () => handleAnswer(option),
                                        className: `option-button ${userAnswer === option && task.correct_answer === option.toLowerCase() ? 'correct' : ''}`,
                                        disabled: userAnswer !== ''
                                    },
                                    option.length > 10 ? option.substring(0, 10) + '...' : option
                                )
                            )
                        ),
                    feedbackState === 'correct' && React.createElement('div', { className: 'feedback-correct' }, '‚≠ê'),
                    selectedCharacter && React.createElement(
                        'div',
                        { className: 'character-game-display', style: { backgroundColor: selectedCharacter.color } },
                        React.createElement('img', {
                            src: selectedCharacter.image,
                            alt: selectedCharacter.name,
                            className: 'selected-character-image'
                        })
                    ),
                    showFireworks ? React.createElement(CelebrationFallback, { show: true }) : null
                ),
                dialogText && React.createElement(DialogBox, { character: selectedCharacter, text: dialogText, key: dialogText })
            ];
        }

        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
            document.getElementById('root').innerHTML = `
                <div class="quiz-container card">
                    <h1 class="title-large">üöÄ –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞</h1>
                    <p class="text-medium">–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞—á–∞—Ç—å –º–∏—Å—Å–∏—é. –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É!</p>
                </div>
            `;
        } else {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(React.createElement(QuizApp));
        }
    </script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93c8e5214ef56753',t:'MTc0NjcwNjY1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>