<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Космические Битвы</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #1e3a8a, #000);
            overflow: hidden;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: transparent;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        .meteor {
            position: absolute;
            width: 2px;
            height: 20px;
            background: linear-gradient(to bottom, #ff4500, transparent);
            animation: meteorFall 1.5s linear infinite;
        }
        @keyframes meteorFall {
            0% { transform: translate(0, -100%) rotate(45deg); opacity: 1; }
            100% { transform: translate(200px, 100vh) rotate(45deg); opacity: 0; }
        }
        .card {
            animation: fadeIn 0.5s ease-in;
            position: relative;
            background: linear-gradient(135deg, #1e40af, #000);
            border: 2px solid #ff4500;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            max-width: 90%;
            width: 100%;
            text-align: center;
            margin-top: 10px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse {
            animation: pulse 1s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        button:hover {
            transform: scale(1.05);
            transition: transform 0.2s;
        }
        button:disabled {
            background-color: #6b7280;
            cursor: not-allowed;
        }
        .progress-container {
            width: 90%;
            position: absolute;
            top: 10px;
            left: 5%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: transparent;
            border: 2px solid #00f;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 0 15px #00f, inset 0 0 5px #00f;
            overflow: hidden;
        }
        .progress-section {
            position: absolute;
            height: 100%;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            transition: width 0.5s ease-in-out;
        }
        .glow-effect {
            position: absolute;
            height: 100%;
            background: #ffffff;
            opacity: 0;
            animation: glow 0.5s ease-out forwards;
        }
        @keyframes glow {
            0% { opacity: 0.8; box-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff; }
            100% { opacity: 0; box-shadow: none; }
        }
        .progress-label {
            color: #ff4500;
            font-size: 12px;
            text-shadow: 0 0 5px #ff4500;
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .score-counter {
            position: absolute;
            top: -30px;
            width: 100%;
            text-align: center;
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 10px #ff4500, 0 0 15px #ff4500;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
            border-radius: 5px;
            animation: scorePulse 0.5s ease-in-out;
        }
        @keyframes scorePulse {
            0%, 100% { transform: scale(1); text-shadow: 0 0 10px #ff4500, 0 0 15px #ff4500; }
            50% { transform: scale(1.1); text-shadow: 0 0 15px #ff4500, 0 0 20px #ff4500; }
        }
        .progress-mark {
            position: absolute;
            height: 100%;
            width: 2px;
            background: #fff;
            opacity: 0.8;
        }
        .bonus-message {
            position: absolute;
            top: -50px;
            width: 100%;
            text-align: center;
            color: #00ff00;
            font-size: 14px;
            text-shadow: 0 0 5px #00ff00;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ff00;
            animation: fadeOut 2s ease-out forwards;
            z-index: 1000;
        }
        @keyframes fadeOut {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
        .rocket-final {
            position: absolute;
            font-size: 20px;
            filter: drop-shadow(0 0 5px #ff4500);
            transition: left 2s ease-out, opacity 2s ease-out;
        }
        .rocket-final.flying {
            left: 100%;
            opacity: 0;
        }
        .celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
        .celebration-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: fall 2s linear forwards;
        }
        .celebration-particle:nth-child(odd) {
            background: #ffd700;
            animation-name: fallGold;
        }
        .celebration-particle:nth-child(even) {
            background: #ff4500;
            animation-name: fallRed;
        }
        @keyframes fallGold {
            0% { opacity: 1; transform: translateY(-10vh) scale(1); }
            100% { opacity: 0; transform: translateY(100vh) scale(0.5); }
        }
        @keyframes fallRed {
            0% { opacity: 1; transform: translateY(-15vh) rotate(45deg) scale(1); }
            100% { opacity: 0; transform: translateY(110vh) rotate(45deg) scale(0.3); }
        }
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ff00;
            border-radius: 50%;
            animation: sparkleFade 1.5s ease-out infinite;
        }
        @keyframes sparkleFade {
            0% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { opacity: 0; transform: scale(2); }
        }
        .quiz-container {
            background-color: #ffffff;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            max-width: 90%;
            width: 100%;
            text-align: center;
        }
        .title-large {
            font-size: 1.5rem;
            font-weight: bold;
            color: #dc2626;
            margin-bottom: 12px;
        }
        .title-medium {
            font-size: 1.25rem;
            font-weight: bold;
            color: #dc2626;
            margin-bottom: 12px;
        }
        .text-medium {
            font-size: 1rem;
            color: #d1d5db;
            margin-bottom: 16px;
        }
        .text-large {
            font-size: 1.125rem;
            color: #d1d5db;
            margin-bottom: 12px;
        }
        .text-xlarge {
            font-size: 1.75rem;
            font-weight: bold;
            color: #facc15;
            margin-bottom: 16px;
        }
        .input-field {
            width: 100%;
            padding: 10px;
            border: 1px solid #dc2626;
            border-radius: 8px;
            margin-bottom: 12px;
            font-size: 1rem;
            color: #ffffff;
            background-color: #1f2937;
            outline: none;
        }
        .input-field:focus {
            ring: 2px;
            ring-color: #dc2626;
        }
        .button-primary {
            background-color: #dc2626;
            color: #ffffff;
            padding: 10px;
            border-radius: 8px;
            width: 100%;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
        }
        .button-primary:hover {
            filter: brightness(1.1);
        }
        .button-restart {
            background-color: #dc2626;
            color: #ffffff;
            padding: 10px;
            border-radius: 8px;
            width: 140px;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
        }
        .button-restart:hover {
            filter: brightness(1.1);
        }
        .flex-col-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .rocket {
            position: absolute;
            font-size: 20px;
            filter: drop-shadow(0 0 5px #ff4500);
            transition: left 0.5s ease-in-out;
            bottom: -5px;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div id="root"></div>
    <script>
        // Генерация звезд и метеоров на фоне
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = `${Math.random() * 3}px`;
            star.style.height = star.style.width;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 2}s`;
            starsContainer.appendChild(star);
        }
        for (let i = 0; i < 10; i++) {
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            meteor.style.left = `${Math.random() * 100}%`;
            meteor.style.top = `${Math.random() * -50}%`;
            meteor.style.animationDelay = `${Math.random() * 3}s`;
            starsContainer.appendChild(meteor);
        }

        // Инициализация Web Audio API
        let audioContext;
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            console.log('Web Audio API инициализирован');
        } catch (e) {
            console.error('Ошибка инициализации Web Audio API:', e);
        }

        // Функция для воспроизведения одиночного звука
        function playSound(frequency, duration, type = 'square', volume = 0.03335) {
            if (!audioContext) return;

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.type = type;
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.start();
            oscillator.stop(audioContext.currentTime + duration);
        }

        // Функция для воспроизведения последовательности нот
        function playSequence(frequencies, durationPerNote, type = 'square', volume = 0.03335) {
            if (!audioContext) return;

            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = type;
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * durationPerNote);
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime + index * durationPerNote);

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.start(audioContext.currentTime + index * durationPerNote);
                oscillator.stop(audioContext.currentTime + (index + 1) * durationPerNote);
            });
        }

        const quizzes = {
            sound: [
                { question: 'Какой звук слышится в начале слова "слон"?', correct_answer: "с" },
                { question: 'Какой звук стоит в конце слова "глаз"?', correct_answer: "с" },
                { question: 'Какой звук слышится в середине слова "мед"?', correct_answer: "е" },
                { question: 'Какой звук в слове "птица" стоит на первом месте?', correct_answer: "п" },
                { question: 'Какой звук в конце слова "кот"?', correct_answer: "т" },
                { question: 'Какой звук слышится в начале слова "ракета"?', correct_answer: "р" },
                { question: 'Какой звук в середине слова "луна"?', correct_answer: "у" },
                { question: 'Какой звук в конце слова "звезда"?', correct_answer: "а" }
            ],
            soundStart: [
                { question: 'Назови слово, начинающееся на звук "СТ"', start_sound: "ст" },
                { question: 'Назови слово, начинающееся на звук "ПЛ"', start_sound: "пл" },
                { question: 'Назови слово, начинающееся на звук "КЛ"', start_sound: "кл" },
                { question: 'Назови слово, начинающееся на звук "СВ"', start_sound: "св" },
                { question: 'Назови слово, начинающееся на звук "БР"', start_sound: "бр" },
                { question: 'Назови слово, начинающееся на звук "ГР"', start_sound: "гр" },
                { question: 'Назови слово, начинающееся на звук "ДР"', start_sound: "др" }
            ],
            rhyme: [
                { question: 'Назови слово, которое рифмуется с "Ложка"', correct_answer: "кошка" },
                { question: 'Назови слово, которое рифмуется с "Диван"', correct_answer: "туман" },
                { question: 'Назови слово, которое рифмуется с "Ёлка"', correct_answer: "чёлка" },
                { question: 'Назови слово, которое рифмуется с "Рубашка"', correct_answer: "букашка" },
                { question: 'Назови слово, которое рифмуется с "Слон"', correct_answer: "сон" },
                { question: 'Назови слово, которое рифмуется с "Звезда"', correct_answer: "беда" },
                { question: 'Назови слово, которое рифмуется с "Космос"', correct_answer: "голос" }
            ],
            mixed: [
                { question: 'Сколько звуков в слове "Кот"?', correct_answer: "3" },
                { question: 'Сколько слогов в слове "Яблоко"?', correct_answer: "3" },
                { question: 'Какая гласная буква под ударением в слове "Телевизор"?', correct_answer: "и" },
                { question: 'Измени один звук в слове "Дом", чтобы получилось новое слово', correct_answer: "том" },
                { question: 'Назови слово, которое рифмуется с "Гармошка"', correct_answer: "картошка" },
                { question: 'Сколько слогов в слове "Ракета"?', correct_answer: "3" },
                { question: 'Какой звук в начале слова "Солнце"?', correct_answer: "с" }
            ]
        };

        const allTasks = [
            ...quizzes.sound.map(task => ({ ...task, category: 'sound' })),
            ...quizzes.soundStart.map(task => ({ ...task, category: 'soundStart' })),
            ...quizzes.rhyme.map(task => ({ ...task, category: 'rhyme' })),
            ...quizzes.mixed.map(task => ({ ...task, category: 'mixed' }))
        ];

        const totalTasks = allTasks.length;
        const basePointsStart = 10;
        const basePointsEnd = 50;
        const basePointsStep = (basePointsEnd - basePointsStart) / (totalTasks - 1);
        const taskPoints = Array.from({ length: totalTasks }, (_, i) => Math.round(basePointsStart + i * basePointsStep));
        const maxBonusPoints = 160;

        function ErrorMessage({ message }) {
            return React.createElement(
                'div',
                { className: 'quiz-container card' },
                React.createElement('h1', { className: 'title-large' }, '🚀 Ошибка!'),
                React.createElement('p', { className: 'text-medium' }, message)
            );
        }

        function RocketFinal({ isFlying }) {
            return React.createElement(
                'div',
                { className: `rocket-final ${isFlying ? 'flying' : ''}`, style: { left: '0%' } },
                '🚀'
            );
        }

        function CelebrationFallback() {
            const particles = Array.from({ length: 300 }).map((_, i) =>
                React.createElement('div', {
                    key: i,
                    className: 'celebration-particle',
                    style: {
                        left: `${Math.random() * 100}%`,
                        top: `${Math.random() * -20 - 10}%`,
                        animationDelay: `${Math.random() * 1}s`,
                        animationDuration: `${1.5 + Math.random() * 1}s`
                    }
                })
            );
            const sparkles = Array.from({ length: 100 }).map((_, i) =>
                React.createElement('div', {
                    key: `sparkle-${i}`,
                    className: 'sparkle',
                    style: {
                        left: `${Math.random() * 100}%`,
                        top: `${Math.random() * 100}%`,
                        animationDelay: `${Math.random() * 1.5}s`
                    }
                })
            );
            return React.createElement(
                'div',
                { className: 'celebration-container' },
                particles,
                sparkles
            );
        }

        function QuizApp() {
            const [currentTask, setCurrentTask] = React.useState(0);
            const [userAnswer, setUserAnswer] = React.useState('');
            const [score, setScore] = React.useState(0);
            const [isStarted, setIsStarted] = React.useState(false);
            const [isFinished, setIsFinished] = React.useState(false);
            const [error, setError] = React.useState(null);
            const [rocketPosition, setRocketPosition] = React.useState(0);
            const [isRocketFlying, setIsRocketFlying] = React.useState(false);
            const [glowKey, setGlowKey] = React.useState(0);
            const [scoreKey, setScoreKey] = React.useState(0);
            const [bonusMessage, setBonusMessage] = React.useState(null);
            const [bonusKey, setBonusKey] = React.useState(0);
            const [totalBonusPoints, setTotalBonusPoints] = React.useState(0);
            const [showCelebration, setShowCelebration] = React.useState(false);
            const finalScreenRef = React.useRef(null);

            const tasks = allTasks;
            const totalTasks = tasks.length;
            const sectionWidth = 100 / totalTasks;
            const filledSections = currentTask + 1;

            const resetState = () => {
                setIsStarted(true);
                setCurrentTask(0);
                setScore(0);
                setUserAnswer('');
                setIsFinished(false);
                setError(null);
                setRocketPosition(0);
                setIsRocketFlying(false);
                setGlowKey(0);
                setScoreKey(0);
                setBonusMessage(null);
                setBonusKey(0);
                setTotalBonusPoints(0);
                setShowCelebration(false);
            };

            const handleStart = () => {
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        console.log('AudioContext возобновлён');
                        resetState();
                    });
                } else {
                    resetState();
                }
            };

            const handleRestart = () => {
                resetState();
            };

            const triggerCelebration = (element) => {
                console.log('Запускаем резервную CSS-анимацию');
                setShowCelebration(true);
                playSequence([440, 554, 659, 880], 0.25, 'square');
                setTimeout(() => setShowCelebration(false), 3000);
            };

            const handleNext = () => {
                const task = tasks[currentTask];
                const isCorrect = task.category === 'soundStart'
                    ? userAnswer.trim().toLowerCase().startsWith(task.start_sound)
                    : userAnswer.trim().toLowerCase() === task.correct_answer.toLowerCase();

                let newScore = score;
                let newTotalBonusPoints = totalBonusPoints;
                if (isCorrect) {
                    const points = taskPoints[currentTask];
                    newScore += points;
                    console.log(`Правильный ответ! Добавлено ${points} очков. Текущий счёт: ${newScore}`);
                    if (Math.random() < 0.3 && newTotalBonusPoints < maxBonusPoints) {
                        const bonusPoints = Math.min(Math.floor(Math.random() * 40) + 5, maxBonusPoints - newTotalBonusPoints);
                        newScore += bonusPoints;
                        newTotalBonusPoints += bonusPoints;
                        setBonusMessage(`Бонус: +${bonusPoints} очков!`);
                        setBonusKey(prev => prev + 1);
                        console.log(`Сработал бонус! Добавлено ${bonusPoints} очков. Текущий счёт: ${newScore}`);
                    }
                } else {
                    console.log('Неправильный ответ');
                }
                setScore(newScore);
                setTotalBonusPoints(newTotalBonusPoints);

                setRocketPosition((currentTask + 1) * sectionWidth);
                setUserAnswer('');
                setGlowKey(glowKey + 1);
                setScoreKey(scoreKey + 1);

                if (currentTask + 1 < tasks.length) {
                    setCurrentTask(currentTask + 1);
                    setBonusMessage(null);
                } else {
                    setIsFinished(true);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && userAnswer.trim()) handleNext();
            };

            React.useEffect(() => {
                if (isFinished) {
                    setTimeout(() => setIsRocketFlying(true), 1000);
                    setTimeout(() => {
                        if (finalScreenRef.current) {
                            triggerCelebration(finalScreenRef.current);
                        } else {
                            console.error('finalScreenRef.current не найден, пробуем document.body');
                            triggerCelebration(document.body);
                        }
                    }, 100);
                }
            }, [isFinished]);

            if (error) {
                return React.createElement(ErrorMessage, { message: error });
            }

            if (!isStarted) {
                return [
                    React.createElement(
                        'div',
                        { className: 'quiz-container card' },
                        React.createElement('h1', { className: 'title-large' }, '🚀 Космические Битвы'),
                        React.createElement('p', { className: 'text-medium' }, 'Пройди путь от простых заданий к сложным и стань капитаном галактики!'),
                        React.createElement(
                            'button',
                            { onClick: handleStart, className: 'button-primary' },
                            'Начать миссию'
                        )
                    )
                ];
            }

            if (isFinished) {
                return [
                    React.createElement(
                        'div',
                        { ref: finalScreenRef, className: 'quiz-container card flex-col-center' },
                        React.createElement('h1', { className: 'title-large' }, '🚀 Миссия завершена!'),
                        React.createElement('p', { className: 'text-large' }, 'Твой результат:'),
                        React.createElement('p', { className: 'text-xlarge pulse' }, `${score} очков`),
                        React.createElement(
                            'button',
                            { onClick: handleRestart, className: 'button-restart' },
                            'Новый полёт'
                        )
                    ),
                    showCelebration ? React.createElement(CelebrationFallback, null) : null,
                    React.createElement(RocketFinal, { isFlying: isRocketFlying })
                ];
            }

            return [
                React.createElement(
                    'div',
                    { className: 'progress-container' },
                    React.createElement(
                        'span',
                        { className: 'progress-label' },
                        'Энергощит:'
                    ),
                    React.createElement(
                        'div',
                        { className: 'progress-bar' },
                        React.createElement(
                            'div',
                            { key: scoreKey, className: 'score-counter' },
                            `Очки: ${score}`
                        ),
                        bonusMessage
                            ? React.createElement(
                                  'div',
                                  { key: bonusKey, className: 'bonus-message' },
                                  bonusMessage
                              )
                            : null,
                        Array.from({ length: totalTasks - 1 }, (_, i) =>
                            React.createElement('div', {
                                key: i,
                                className: 'progress-mark',
                                style: { left: `${(i + 1) * sectionWidth}%` }
                            })
                        ),
                        React.createElement(
                            'div',
                            {
                                className: 'progress-section',
                                style: {
                                    width: `${filledSections * sectionWidth}%`
                                }
                            },
                            React.createElement('div', {
                                key: glowKey,
                                className: 'glow-effect',
                                style: {
                                    width: `${sectionWidth}%`
                                }
                            })
                        ),
                        React.createElement(
                            'div',
                            {
                                className: 'rocket',
                                style: { left: `${rocketPosition}%` }
                            },
                            '🚀'
                        )
                    )
                ),
                React.createElement(
                    'div',
                    { className: 'quiz-container card flex-col-center' },
                    React.createElement('h1', { className: 'title-medium' }, `Миссия ${currentTask + 1}`),
                    React.createElement('p', { className: 'text-medium' }, tasks[currentTask].question),
                    React.createElement('input', {
                        type: 'text',
                        value: userAnswer,
                        onChange: (e) => setUserAnswer(e.target.value),
                        onKeyPress: handleKeyPress,
                        className: 'input-field',
                        placeholder: 'Твой выстрел',
                        autoFocus: true
                    }),
                    React.createElement(
                        'button',
                        {
                            onClick: handleNext,
                            disabled: !userAnswer.trim(),
                            className: 'button-primary'
                        },
                        'Огонь!'
                    )
                )
            ];
        }

        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
            document.getElementById('root').innerHTML = `
                <div class="quiz-container card">
                    <h1 class="title-large">🚀 Ошибка запуска</h1>
                    <p class="text-medium">Не удалось начать миссию. Проверь интернет и перезагрузи страницу!</p>
                </div>
            `;
        } else {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(React.createElement(QuizApp));
        }
    </script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9396cf398fbf53ee',t:'MTc0NjE4MTQ3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>